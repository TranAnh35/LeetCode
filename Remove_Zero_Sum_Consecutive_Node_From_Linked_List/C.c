#include <stdio.h>
#include <stdlib.h>

#define N 1001

struct ListNode {
    int val;
    struct ListNode *next;
};

void printList(struct ListNode* head){
    while(head){
        printf("%d ", head->val);
        head = head->next;
    }
    printf("\n");
}

struct ListNode* newNode(int val){
    struct ListNode* temp = (struct ListNode*)malloc(sizeof(struct ListNode));
    temp->val = val;
    temp->next = NULL;
    return temp;
}

void push_bach(struct ListNode** head, int val){
    struct ListNode* temp = newNode(val);
    if(*head == NULL){
        *head = temp;
        return;
    }
    struct ListNode* last = *head;
    while(last->next)
        last = last->next;
    last->next = temp;
}

struct ListNode* removeZeroSumSublists(struct ListNode* head) {
    struct ListNode* temp = (struct ListNode*)malloc(sizeof(struct ListNode));
    temp->next = head;
    temp->val = 0;
    struct ListNode* map[1001] = {NULL};
    int sum = 0;
    map[0] = temp;
    while(head){
        sum += head->val;
        map[sum] = head;
        head = head->next;
    }
    sum = 0;
    head = temp;
    while(head){
        sum += head->val;
        if(map[sum] != head){
            head->next = map[sum]->next;
        }
        head = head->next;
    }
    return temp->next;
}

int main(){
    struct ListNode* head = NULL;
    int arr[] = {-38,90,90,-14,69,63,85,-71,37,-16,-7,-52,8,60,84,15,3,1,42,-27,-58,-88,57,27,-24,-1,15,-88,-24,-70,-59,21,-74,58,-42,-42,-38,-63,63,3,62,17,90,-73,2,68,-75,-40,-99,99,60,-63,-18,-74,20,-91,-36,17,28,-41,85,-43,-70,-20,-90,85,89,-74,64,-12,50,5,65,-21,18,-6,-12,-88,-91,-66,-2,6,2,-12,68,95,-8,67,60,41,-27,4,-62,40,-51,85,-15,80,-55,-73,-66,53,-95,-20,-79,-78,-89,-91,75,50,-59,45,19,25,24,46,10,-82,-85,-72,-49,39,64,-34,-45,-47,-99,-92,61,51,30,40,-70,59,79,62,89,-6,-64,33,55,48,69,-45,76,6,86,-36,-13,-27,-51,88,-16,61,-73,4,100,-55,20,12,68,-9,-65,-38,-99,-88,-11,24,-14,-70,51,15,97,12,-45,-56,75,100,36,-44,-55,66,-18,35,-88,25,-36,14,-96,-35,64,-93,73,-24,33,91,24,31,-21,-37,-62,83,8,-31,-9,-75,-33,27,-50,24,5,-72,-97,68,78,-62,-52,39,27,34,-60,-28,12,-12,21,-82,-41,-72,-8,86,74,58,-77,-42,-20,-76,-36,-40,74,82,-48,41,-29,34,25,44,22,-18,40,-95,-93,-69,-9,-80,-79,77,-96,-8,17,-58,-2,15,-65,-15,-81,-51,57,-97,26,2,-21,-14,-40,-20,61,90,21,82,49,3,8,-67,67,-66,-81,-65,85,28,-45,34,-72,81,-72,41,-15,-93,-6,14,4,-53,70,-39,-38,27,-34,3,14,-47,7,-41,-86,53,81,58,-44,-98,-98,1,-76,57,-49,-48,-11,-49,-40,-48,-55,-36,7,68,56,51,-41,91,-99,-43,-66,28,-55,-79,26,74,24,6,71,-78,88,-77,-100,92,31,-66,97,40,-64,-8,9,-55,26,89,-94,71,77,-96,-27,91,27,-93,-66,-54,35,-85,34,65,-62,14,-39,12,10,37,59,27,60,-9,55,69,-54,-53,87,41,41,25,99,78,68,-66,67,42,-74,-44,47,-37,-42,31,-73,-56,-59,43,-42,22,-68,65,70,97,-77,56,55,-49,-3,55,-65,-28,-4,40,71,19,30,49,27,54,86,78,-76,-94,84,-72,-87,-9,-49,59,-17,59,-64,50,-31,22,39,72,-74,23,-76,49,68,-30,-15,11,27,-24,46,-83,-64,30,-7,-58,-22,-93,48,-41,69,-58,-8,-37,-85,53,30,-68,68,-31,-53,0,43,-4,31,67,-39,-100,99,47,-35,-6,-46,-81,1,82,-84,-29,-43,17,-51,-31,-51,-98,42,-82,-76,34,81,8,89,-23,55,-60,-27,29,-16,47,4,-89,-78,92,45,-8,-50,-24,20,71,39,-32,-27,-66,-78,84,-41,-69,-29,23,-26,58,-53,-43,-99,-45,25,-50,-32,-20,-12,-34,-46,43,-43,-98,13,-26,49,-94,88,58,65,-60,-32,98,25,11,-99,28,39,27,1,51,74,-27,9,14,-98,51,-57,83,-94,-50,-6,-7,12,47,-3,-91,-36,-12,70,-89,98,62,-96,-40,25,-89,-59,100,44,31,-64,46,62,-57,45,-11,11,-32,58,-24,6,72,-5,98,90,-61,-66,-27,70,-75,-77,96,-65,-21,-55,72,13,-16,13,32,-16,21,39,61,66,-5,-28,81,-27,30,92,33,-40,18,-17,-60,22,-93,-25,63,-98,-34,-95,-100,-8,11,29,78,90,-68,18,47,87,-36,-24,-27,58,-20,18,-17,81,-45,-33,66,-74,13,-6,16,-88,11,6,-97,99,78,15,-36,-55,2,11,-85,85,-44,-62,73,56,-25,44,-97,-92,99,28,28,19,85,100,-96,-90,15,-98,19,-38,-96,92,59,-12,-42,-88,90,46,22,-28,-19,-87,46,28,-71,37,0,-58,-95,66,40,-54,37,63,8,-35,-100,-71,-30,-49,6,3,-97,7,-51,-2,-23,-86,30,-16,-81,-59,-39,75,23,-74,-96,93,74,-80,94,-76,20,-47,25,70,33,-86,41,-38,-35,69,-26,-83,-57,-22,100,-71,60,-35,-3,-34,60,60,-13,53,51,-36,44,50,65,50,10,-94,50,100,7,-61,24,5,-77,-66,66,-100,-61,-86,-29,-17,76,-90,81,24,42,-86,-71,-2,67,-3,-5,92,55,-23,2,-20,51,-36,55,-35,-34,-7,23,-11,-94,81,0,26,-33,52,59,-55,4,53,100,96,11,-71,22,49,25,-57,-34,4,54,-95,-87,14,45,-44,21,-16,23,75,-82,86,54,68,47,-90,-64,-4,82,-6,-27,90,-27,-22,-48,-92,-67,30,22,-58,-36,15,-22,23,-57,-66,74,77,14,44,-30,-82,-67,-33,90,-23,-10,74,-54,25,63,63,82,11,-90,73,-51,37,-76,-17,-39,-68,97,25,91,29,-44,-56,-34,22,95,7,68,-83,89,50,86,72,-42,59,40,-17,61,-41,98,-24,71,-49,86,-55,79,77,-44,-79,-25,-47,92,66,-6,9,37,-48,0,84,-60,-86,-99,29,38,-34,-15,8,-26,-96,70,86,-62,35,43,55,78,-28,87,90,-90,-72,72,73,6,-94,-12,54,-88,62,80,51,-73,-47,58,16,36,56,9,-29,38,-68,7};
    int n = sizeof(arr) / sizeof(arr[0]);
    for(int i = 0; i < n; i++)
        push_bach(&head, arr[i]);
    struct ListNode* temp = removeZeroSumSublists(head);
    printList(temp);
    return 0;
}

